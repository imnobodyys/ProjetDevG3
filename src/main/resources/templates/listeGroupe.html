<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mes groupes</title>
</head>
<body>
<h2>Mes groupes créés</h2>

<table border="1">
    <tr>
        <th>Nom</th>
        <th>Description</th>
        <th>Date de création</th>
        <th>Action</th>
    </tr>
    <tr th:each="g : ${groupes}">
        <td th:text="${g.nom}"></td>
        <td th:text="${g.description}"></td>
        <td th:text="${#temporals.format(g.dtCreation, 'dd/MM/yyyy HH:mm')}"></td>
        <td>
            <form th:action="@{/groupes/{id}/supprimer(id=${g.id})}" method="post"
                  sec:authorize="isAuthenticated() and g.createur.email == authentication.name">
                <button type="submit" onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce groupe ?')">
                    Supprimer
                </button>
            </form>
        </td>
    </tr>
</table>

<!-- Bouton Retour en dehors de la boucle -->
<div class="mt-3">
    <button type="button" class="btn btn-secondary" onclick="history.back()">Retour</button>
</div>
<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>